<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="icon" href="img/flowers.png" type="image/x-icon" />
    <title>Flores Amarillas - Para Mi Cielo</title>
    <meta name="description" content="Un mensaje especial" />
</head>
<body class="container">
    <!-- Loader para el audio -->
    <div class="audio-loader" id="audioLoader">
        <div class="spinner"></div>
    </div>

    <!-- Audio con preload autom√°tico -->
    <audio id="audio" preload="auto" src="sound/The Beatles - Here Comes The Sun (2019 Mix).mp3"></audio>
    
    <!-- Bot√≥n de play mejorado -->
    <div id="playButton" class="play-star" title="Reproducir canci√≥n">üåü</div>
    
    <!-- Control de volumen -->
    <div class="volume-control" id="volumeControl">
        <div class="volume-icon">üîä</div>
        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.1" value="0.7">
    </div>
    
    <!-- Letras de la canci√≥n -->
    <div id="lyrics"></div>
    
    <!-- T√≠tulo principal -->
    <h1 class="titulo">
        Estas flores amarillas son un reflejo de la alegr√≠a que traes a mi vida.<br><br>
        Gracias por iluminar mis d√≠as con tu presencia.
    </h1>
    
    <!-- Mensaje final que aparecer√° al terminar -->
    <div class="final-message" id="finalMessage">
        Espero que hayas disfrutado este peque√±o detalle<br>
        <br>
        Eres y siempre ser√°s mi cielo m√°s hermoso<br>
        <br>
        Con todo mi amor,<br>
        <strong>Tu Futuro Esposo</strong>
    </div>

    <!-- Fondo nocturno -->
    <div class="night"></div>
    
    <!-- Contenedor de flores -->
        <div class="flowers">
      <div class="flower flower--1">
        <div class="flower__leafs flower__leafs--1">
          <div class="flower__leaf flower__leaf--1"></div>
          <div class="flower__leaf flower__leaf--2"></div>
          <div class="flower__leaf flower__leaf--3"></div>
          <div class="flower__leaf flower__leaf--4"></div>
          <div class="flower__white-circle"></div>

          <div class="flower__light flower__light--1"></div>
          <div class="flower__light flower__light--2"></div>
          <div class="flower__light flower__light--3"></div>
          <div class="flower__light flower__light--4"></div>
          <div class="flower__light flower__light--5"></div>
          <div class="flower__light flower__light--6"></div>
          <div class="flower__light flower__light--7"></div>
          <div class="flower__light flower__light--8"></div>
        </div>
        <div class="flower__line">
          <div class="flower__line__leaf flower__line__leaf--1"></div>
          <div class="flower__line__leaf flower__line__leaf--2"></div>
          <div class="flower__line__leaf flower__line__leaf--3"></div>
          <div class="flower__line__leaf flower__line__leaf--4"></div>
          <div class="flower__line__leaf flower__line__leaf--5"></div>
          <div class="flower__line__leaf flower__line__leaf--6"></div>
        </div>
      </div>

      <div class="flower flower--2">
        <div class="flower__leafs flower__leafs--2">
          <div class="flower__leaf flower__leaf--1"></div>
          <div class="flower__leaf flower__leaf--2"></div>
          <div class="flower__leaf flower__leaf--3"></div>
          <div class="flower__leaf flower__leaf--4"></div>
          <div class="flower__white-circle"></div>

          <div class="flower__light flower__light--1"></div>
          <div class="flower__light flower__light--2"></div>
          <div class="flower__light flower__light--3"></div>
          <div class="flower__light flower__light--4"></div>
          <div class="flower__light flower__light--5"></div>
          <div class="flower__light flower__light--6"></div>
          <div class="flower__light flower__light--7"></div>
          <div class="flower__light flower__light--8"></div>
        </div>
        <div class="flower__line">
          <div class="flower__line__leaf flower__line__leaf--1"></div>
          <div class="flower__line__leaf flower__line__leaf--2"></div>
          <div class="flower__line__leaf flower__line__leaf--3"></div>
          <div class="flower__line__leaf flower__line__leaf--4"></div>
        </div>
      </div>

      <div class="flower flower--3">
        <div class="flower__leafs flower__leafs--3">
          <div class="flower__leaf flower__leaf--1"></div>
          <div class="flower__leaf flower__leaf--2"></div>
          <div class="flower__leaf flower__leaf--3"></div>
          <div class="flower__leaf flower__leaf--4"></div>
          <div class="flower__white-circle"></div>

          <div class="flower__light flower__light--1"></div>
          <div class="flower__light flower__light--2"></div>
          <div class="flower__light flower__light--3"></div>
          <div class="flower__light flower__light--4"></div>
          <div class="flower__light flower__light--5"></div>
          <div class="flower__light flower__light--6"></div>
          <div class="flower__light flower__light--7"></div>
          <div class="flower__light flower__light--8"></div>
        </div>
        <div class="flower__line">
          <div class="flower__line__leaf flower__line__leaf--1"></div>
          <div class="flower__line__leaf flower__line__leaf--2"></div>
          <div class="flower__line__leaf flower__line__leaf--3"></div>
          <div class="flower__line__leaf flower__line__leaf--4"></div>
        </div>
      </div>

      <div class="grow-ans" style="--d: 1.2s">
        <div class="flower__g-long">
          <div class="flower__g-long__top"></div>
          <div class="flower__g-long__bottom"></div>
        </div>
      </div>

      <div class="growing-grass">
        <div class="flower__grass flower__grass--1">
          <div class="flower__grass--top"></div>
          <div class="flower__grass--bottom"></div>
          <div class="flower__grass__leaf flower__grass__leaf--1"></div>
          <div class="flower__grass__leaf flower__grass__leaf--2"></div>
          <div class="flower__grass__leaf flower__grass__leaf--3"></div>
          <div class="flower__grass__leaf flower__grass__leaf--4"></div>
          <div class="flower__grass__leaf flower__grass__leaf--5"></div>
          <div class="flower__grass__leaf flower__grass__leaf--6"></div>
          <div class="flower__grass__leaf flower__grass__leaf--7"></div>
          <div class="flower__grass__leaf flower__grass__leaf--8"></div>
          <div class="flower__grass__overlay"></div>
        </div>
      </div>

      <div class="growing-grass">
        <div class="flower__grass flower__grass--2">
          <div class="flower__grass--top"></div>
          <div class="flower__grass--bottom"></div>
          <div class="flower__grass__leaf flower__grass__leaf--1"></div>
          <div class="flower__grass__leaf flower__grass__leaf--2"></div>
          <div class="flower__grass__leaf flower__grass__leaf--3"></div>
          <div class="flower__grass__leaf flower__grass__leaf--4"></div>
          <div class="flower__grass__leaf flower__grass__leaf--5"></div>
          <div class="flower__grass__leaf flower__grass__leaf--6"></div>
          <div class="flower__grass__leaf flower__grass__leaf--7"></div>
          <div class="flower__grass__leaf flower__grass__leaf--8"></div>
          <div class="flower__grass__overlay"></div>
        </div>
      </div>

      <div class="grow-ans" style="--d: 2.4s">
        <div class="flower__g-right flower__g-right--1">
          <div class="leaf"></div>
        </div>
      </div>

      <div class="grow-ans" style="--d: 2.8s">
        <div class="flower__g-right flower__g-right--2">
          <div class="leaf"></div>
        </div>
      </div>

      <div class="grow-ans" style="--d: 2.8s">
        <div class="flower__g-front">
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--1"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--2"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--3"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--4"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--5"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--6"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--7"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--8"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div class="flower__g-front__line"></div>
        </div>
      </div>

      <div class="grow-ans" style="--d: 3.2s">
        <div class="flower__g-fr">
          <div class="leaf"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--1"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--2"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--3"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--4"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--5"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--6"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--7"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--8"></div>
        </div>
      </div>

      <div class="long-g long-g--0">
        <div class="grow-ans" style="--d: 3s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 2.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 3.4s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--1">
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 3.8s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 4s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--2">
        <div class="grow-ans" style="--d: 4s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 4.4s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 4.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--3">
        <div class="grow-ans" style="--d: 4s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 3s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--4">
        <div class="grow-ans" style="--d: 4s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 3s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--5">
        <div class="grow-ans" style="--d: 4s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 3s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--6">
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 4.4s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 4.6s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 4.8s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--7">
        <div class="grow-ans" style="--d: 3s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 3.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 3.5s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>
    </div>

    <!-- Scripts mejorados -->
    <script>
        // Sincronizar las letras con la canci√≥n (Here Comes the Sun - The Beatles)
        var audio = document.querySelector("audio");
        var lyrics = document.querySelector("#lyrics");

        // Array de letras mejorado con efectos especiales
        var lyricsData = [
          {"text":"Para mi cielo m√°s hermoso","time":0},
          {"text":"Here Comes The Sun ‚òÄÔ∏è","time":15.36},
          {"text":"Here Comes The Sun","time":19.01},
          {"text":"And I say","time":20.53},
          {"text":"It's all right ‚ú®","time":22.56},
          {"text":"‚ô™‚ô™‚ô™‚ô™‚ô™‚ô™‚ô™‚ô™‚ô™","time":24.91},
          {"text":"Little darling","time":27.37},
          {"text":"It's been a long cold lonely winter","time":29.78},
          {"text":"Little darling","time":35.74},
          {"text":"It feels like years since it's been here","time":36.62},
          {"text":"Here comes the Sun (doo, doo, doo) ‚òÄÔ∏è","time":42.12},
          {"text":"Here comes the Sun","time":43.2},
          {"text":"And I say","time":48.54},
          {"text":"It's all right","time":50.38},
          {"text":"ü§çüåàüåàü§ç","time":52.88},
          {"text":"Little darling","time":59.45},
          {"text":"The smiles returning to the faces","time":61.34},
          {"text":"Little darling","time":67.1},
          {"text":"It seems like years since it's been here","time":68.24},
          {"text":"Here comes the Sun ‚òÄÔ∏è","time":74.56},
          {"text":"Here comes the Sun ‚ô™‚ô´‚ô™","time":78.69},
          {"text":"And I say","time":80.64},
          {"text":"It's all right","time":82.37},
          {"text":"Ôºà„Å•Ôø£3Ôø£Ôºâ„Å•‚ï≠‚ù§ÔΩû","time":85.33},
          {"text":"Sun, Sun, Sun, here it comes ‚òÄÔ∏è","time":96.53},
          {"text":"Sun, Sun, Sun, here it comes","time":102.31},
          {"text":"Sun, Sun, Sun, here it comes ‚ô´","time":114.32},
          {"text":"Sun, Sun, Sun, here it comes ‚òÄÔ∏è‚ú®","time":120.04},
          {"text":"Little darling","time":131.71},
          {"text":"I feel that ice is slowly melting","time":134.1},
          {"text":"Little darling","time":140.09},
          {"text":"It seems like years since it's been clear","time":141.66},
          {"text":"Here comes the Sun (doo, doo, doo) ‚òÄÔ∏è","time":146.91},
          {"text":"Here comes the Sun","time":150.78},
          {"text":"And I say","time":153.28},
          {"text":"It's all right ‚ú®","time":154.6},
          {"text":"Here comes the Sun (doo, doo, doo)","time":160.23},
          {"text":"Here comes the Sun ‚òÄÔ∏è","time":164.14},
          {"text":"It's all right","time":167.89},
          {"text":"It's all right","time":173.76},
          {"text":"Te amo muitoo üç™","time":181.64}
        ];

        // Variables para efectos visuales
        let currentLyricIndex = -1;
        let isTransitioning = false;

        // Funci√≥n para crear efectos de part√≠culas en las letras especiales
        function createTextParticles(text) {
            if (text.includes('‚òÄÔ∏è') || text.includes('‚ú®') || text.includes('üíï')) {
                const particles = ['‚ú®', '‚≠ê', 'üí´', 'üåü'];
                
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        const particle = document.createElement('div');
                        particle.textContent = particles[Math.floor(Math.random() * particles.length)];
                        particle.style.position = 'fixed';
                        particle.style.pointerEvents = 'none';
                        particle.style.left = (Math.random() * window.innerWidth) + 'px';
                        particle.style.top = (Math.random() * window.innerHeight * 0.3 + window.innerHeight * 0.2) + 'px';
                        particle.style.fontSize = '1.5rem';
                        particle.style.zIndex = '50';
                        particle.style.transition = 'all 2s ease-out';
                        particle.style.opacity = '1';
                        document.body.appendChild(particle);

                        setTimeout(() => {
                            particle.style.transform = `translateY(-100px) rotate(360deg)`;
                            particle.style.opacity = '0';
                        }, 100);

                        setTimeout(() => {
                            if (document.body.contains(particle)) {
                                document.body.removeChild(particle);
                            }
                        }, 2100);
                    }, i * 100);
                }
            }
        }

        // Funci√≥n mejorada para actualizar las letras
        function updateLyrics() {
            if (!audio || audio.paused) return;
            
            var t = audio.currentTime;
            let newLyricIndex = -1;

            // Buscar la l√≠nea actual
            for (let i = 0; i < lyricsData.length; i++) {
                const start = lyricsData[i].time;
                const end = (i < lyricsData.length - 1) ? lyricsData[i + 1].time : audio.duration || 200;
                
                if (t >= start && t < end) {
                    newLyricIndex = i;
                    break;
                }
            }

            // Solo actualizar si cambi√≥ la l√≠nea
            if (newLyricIndex !== currentLyricIndex && newLyricIndex !== -1) {
                currentLyricIndex = newLyricIndex;
                const currentLine = lyricsData[newLyricIndex];
                
                if (currentLine && !isTransitioning) {
                    isTransitioning = true;
                    
                    // Fade out actual
                    lyrics.style.opacity = '0';
                    lyrics.style.transform = 'translateY(-10px)';
                    
                    setTimeout(() => {
                        // Cambiar texto y aplicar efectos especiales
                        lyrics.innerHTML = currentLine.text;
                        
                        // Efectos especiales para textos importantes
                        if (currentLine.text.includes('üç™') || 
                            currentLine.text.includes('Te amo') || 
                            currentLine.text.includes('ü§ç')) {
                            lyrics.style.color = '#FF69B4';
                            lyrics.style.textShadow = '0 0 20px rgba(255, 105, 180, 0.8), 2px 2px 8px rgba(0, 0, 0, 0.8)';
                            lyrics.style.fontSize = '36px';
                            createTextParticles(currentLine.text);
                        } else if (currentLine.text.includes('‚òÄÔ∏è') || currentLine.text.includes('Sun')) {
                            lyrics.style.color = '#FFD700';
                            lyrics.style.textShadow = '0 0 15px rgba(255, 215, 0, 0.6), 2px 2px 8px rgba(0, 0, 0, 0.8)';
                            lyrics.style.fontSize = '34px';
                        } else if (currentLine.text.includes('‚ô™') || currentLine.text.includes('‚ô´')) {
                            lyrics.style.color = '#00FFFF';
                            lyrics.style.textShadow = '0 0 15px rgba(0, 255, 255, 0.6), 2px 2px 8px rgba(0, 0, 0, 0.8)';
                            lyrics.style.fontSize = '30px';
                        } else {
                            lyrics.style.color = '#FFD700';
                            lyrics.style.textShadow = '2px 2px 8px rgba(0, 0, 0, 0.8), 0 0 15px rgba(255, 215, 0, 0.4)';
                            lyrics.style.fontSize = '32px';
                        }
                        
                        // Fade in con efecto
                        lyrics.style.opacity = '1';
                        lyrics.style.transform = 'translateY(0)';
                        
                        setTimeout(() => {
                            isTransitioning = false;
                        }, 300);
                        
                    }, 200);
                }
            }
            
            // Si no hay l√≠nea actual, ocultar
            if (newLyricIndex === -1 && lyrics.style.opacity !== '0') {
                lyrics.style.opacity = '0';
                lyrics.innerHTML = '';
                currentLyricIndex = -1;
            }
        }

        // Funci√≥n para crear efectos de lluvia de p√©talos
function createPetalRain() {
    const petals = ['üå∏', 'üå∫', 'üåª', 'üå∑', 'üíê'];
    
    for (let i = 0; i < 10; i++) {
        setTimeout(() => {
            const petal = document.createElement('div');
            petal.textContent = petals[Math.floor(Math.random() * petals.length)];
            petal.style.position = 'fixed';
            petal.style.pointerEvents = 'none';
            petal.style.left = Math.random() * window.innerWidth + 'px';
            petal.style.top = '-50px';
            petal.style.fontSize = (Math.random() * 1 + 0.8) + 'rem';
            petal.style.zIndex = '5';
            petal.style.transition = 'all 8s linear';
            petal.style.opacity = '0.8';
            document.body.appendChild(petal);

            setTimeout(() => {
                petal.style.transform = `translateY(${window.innerHeight + 100}px) rotate(${Math.random() * 720}deg)`;
                petal.style.opacity = '0';
            }, 100);

            setTimeout(() => {
                if (document.body.contains(petal)) {
                    document.body.removeChild(petal);
                }
            }, 8100);
        }, i * 800);
    }
}

// Funci√≥n para efectos especiales en momentos clave
function triggerSpecialEffects(time) {
    // Lluvia de p√©talos en momentos rom√°nticos
    if (time >= 52 && time <= 54) { // "Te amo infinito"
        createPetalRain();
    }
    
    if (time >= 85 && time <= 87) { // "Eres mi sol y mis estrellas"
        createPetalRain();
    }
    
    if (time >= 181 && time <= 183) { // "Eres la luz de mis d√≠as"
        createPetalRain();
    }
}

// Loop principal mejorado usando requestAnimationFrame
let lastTime = -1;
function loop() {
    if (audio && !audio.paused) {
        const currentTime = audio.currentTime;
        
        // Solo actualizar si el tiempo cambi√≥ significativamente
        if (Math.abs(currentTime - lastTime) > 0.1) {
            updateLyrics();
            triggerSpecialEffects(currentTime);
            lastTime = currentTime;
        }
    }
    
    requestAnimationFrame(loop);
}

// Iniciar el loop
requestAnimationFrame(loop);

// Funci√≥n para ocultar t√≠tulo con efecto mejorado
function ocultarTituloConEfecto() {
    const titulo = document.querySelector(".titulo");
    if (titulo && titulo.style.display !== "none") {
        // Efecto de desvanecimiento m√°s suave
        titulo.style.transition = "all 3s ease-in-out";
        titulo.style.opacity = "0";
        titulo.style.transform = "translateY(-30px) scale(0.9)";
        
        setTimeout(() => { 
            titulo.style.display = "none"; 
        }, 3000);
    }
}
// Event listeners para mejorar la sincronizaci√≥n
if (audio) {
    // Cuando comience la reproducci√≥n
    audio.addEventListener('play', () => {
        console.log('Audio started - lyrics sync activated');
        currentLyricIndex = -1; // Reset
    });
    
    // Cuando se pause
    audio.addEventListener('pause', () => {
        console.log('Audio paused - lyrics sync paused');
    });
    
    // Cuando termine
    audio.addEventListener('ended', () => {
        console.log('Audio ended');
        lyrics.style.opacity = '0';
        lyrics.innerHTML = '';
        
        // Efecto final de p√©talos
        setTimeout(() => {
            createPetalRain();
            createPetalRain(); // Doble lluvia al final
        }, 1000);
    });
    
    // Ocultar t√≠tulo despu√©s de 3:40 min
    audio.addEventListener('timeupdate', () => {
        if (audio.currentTime > 220) {
            ocultarTituloConEfecto();
        }
    });
}

// Funci√≥n de utilidad para debugging
function debugLyrics() {
    console.log('Lyrics Debug:', {
        currentTime: audio?.currentTime,
        currentLyricIndex,
        isTransitioning,
        totalLyrics: lyricsData.length
    });
}

// Funci√≥n para saltar a una parte espec√≠fica de la canci√≥n (para testing)
function jumpToTime(seconds) {
    if (audio) {
        audio.currentTime = seconds;
        console.log(`Jumped to ${seconds} seconds`);
    }
}

// Hacer funciones disponibles globalmente para debugging
window.debugLyrics = debugLyrics;
window.jumpToTime = jumpToTime;

        // Elementos del DOM para controles
        var playButton = document.getElementById('playButton');
        var volumeControl = document.getElementById('volumeControl');
        var volumeSlider = document.getElementById('volumeSlider');
        var audioLoader = document.getElementById('audioLoader');
        var finalMessage = document.getElementById('finalMessage');

        // Variables de control
        let isPlaying = false;
        let hasStarted = false;

        // Configurar volumen inicial
        audio.volume = 0.7;

        // Funci√≥n para iniciar la reproducci√≥n
        function startPlayback() {
            if (!hasStarted) {
                audioLoader.style.display = 'block';
                
                audio.play().then(() => {
                    isPlaying = true;
                    hasStarted = true;
                    audioLoader.style.display = 'none';
                    
                    // Ocultar el bot√≥n de play
                    playButton.style.opacity = '0';
                    setTimeout(() => {
                        playButton.style.display = 'none';
                    }, 300);
                    
                    // Mostrar control de volumen
                    volumeControl.classList.add('show');
                    
                    // Remover la clase container para iniciar animaciones
                    document.body.classList.remove("container");
                    
                }).catch((error) => {
                    console.error('Error al reproducir:', error);
                    audioLoader.style.display = 'none';
                    playButton.innerHTML = 'üîÑ';
                });
            }
        }

        // Event listener para el bot√≥n de play
        playButton.addEventListener('click', startPlayback);

        // Control de volumen
        volumeSlider.addEventListener('input', function() {
            audio.volume = this.value;
            
            const volumeIcon = document.querySelector('.volume-icon');
            if (this.value == 0) {
                volumeIcon.textContent = 'üîá';
            } else if (this.value < 0.5) {
                volumeIcon.textContent = 'üîâ';
            } else {
                volumeIcon.textContent = 'üîä';
            }
        });

        // Funci√≥n para mostrar mensaje final
        function mostrarMensajeFinal() {
            if (finalMessage) {
                finalMessage.classList.add('show');
            }
        }

        // Event listeners para eventos del audio
        audio.addEventListener('ended', () => {
            setTimeout(mostrarMensajeFinal, 2000);
        });

        // Ocultar t√≠tulo despu√©s de 3:40 min
        audio.addEventListener('timeupdate', () => {
            if (audio.currentTime > 220) {
                const titulo = document.querySelector('.titulo');
                if (titulo && titulo.style.display !== 'none') {
                    titulo.style.transition = "all 3s ease-in-out";
                    titulo.style.opacity = "0";
                    titulo.style.transform = "translateY(-30px) scale(0.9)";
                    
                    setTimeout(() => { 
                        titulo.style.display = "none"; 
                    }, 3000);
                }
            }
        });
    </script>
</body>
</html>